### mysql主从复制原理、读写分离原理

#### 主从复制 

1. 主要涉及三个线程：binlog 线程、I/O 线程和 SQL 线程。

- binlog 线程 ：负责将主服务器上的数据更改写入二进制文件（binlog）中；
- I/O 线程 ：从库的IO线程负责从主库服务器上读取binlog，并写入从库服务器的中继日志中；
- SQL 线程 ：从库中有一个 SQL 线程会从中继日志读取 binlog，然后执行 binlog 日志中的内容，
            也就是在自己本地再次执行一遍 SQL，这样就可以保证自己跟主库的数据是一样的；

2. 主从复制存在的问题
- 主从同步延迟问题
- 主库突然宕机，然后恰好数据还没同步到从库，数据可能就丢失<br/>

    **mysql 利用 半同步复制，用来解决主库数据丢失问题；利用并行复制，用来解决主从同步延时问题。**

- 半同步复制：就是主库写入 binlog 日志之后，会强制同步从库，从库将日志写入到本地之后，会给主库一个应答，此时主库认为写操作完成
- 并行复制：从库会开启多个线程读取 binlog 日志来同步数据


#### 读写分离
